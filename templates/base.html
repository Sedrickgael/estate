<!DOCTYPE html>
<html lang="zxx">
<head>
	<title>
    {% block title %}
        
    {% endblock title %}
        </title>
	<meta charset="UTF-8">
	<meta name="description" content="Real estate html template">
	<meta name="keywords" content="real estate, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <!-- Favicon -->
    
    {% for identite in identites %}
        <link href="/media/{{identite.favicone}}" rel="shortcut icon"/>
    
        
	

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Sarabun:300,300i,400,400i,500,500i,600,600i,700,700i&display=swap" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="/static/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="/static/css/flaticon.css"/>
	<link rel="stylesheet" href="/static/css/magnific-popup.css"/>
	<link rel="stylesheet" href="/static/css/owl.carousel.min.css"/>

	<!-- Main Stylesheets -->
	<link rel="stylesheet" href="/static/css/style.css"/>


	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        /* With arrow tabs */
        @media (min-width: 576px) {
        .rounded-nav {
            border-radius: 50rem !important;
        }
        }

        @media (min-width: 576px) {
        .rounded-nav .nav-link {
            border-radius: 50rem !important;
        }
        }
        .lined .nav-link {
        border: none;
        border-bottom: 3px solid transparent;
        }

        .lined .nav-link:hover {
        border: none;
        border-bottom: 3px solid transparent;
        }

        .lined .nav-link.active {
        background: none;
        color: #555;
        border-color: #21d68b;
        }

        .nav-pills .nav-link.active, .nav-pills .show>.nav-link {
        color: #f8f9fa;
        background-color: #12d2dd;
        }
        
    </style>

</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
    </div>
    
	

	<!-- Header section -->
	<header class="header-section">
		<!-- logo -->
		<a href="{% url 'index' %}" class="site-logo">
			<img src="/media/{{identite.logo}}" alt="">
		</a>
		<div class="nav-switch">
			<i class="fa fa-bars"></i>
		</div>
		<div class="container">
			<ul class="main-menu">
				<li><a href="{% url 'index' %}">Home</a></li>
				<li><a href="{% url 'about' %}">About Us</a></li>
				<li><a href="{% url 'house' %}">Developments</a></li>
				<li><a href="{% url 'blog' %}">News</a></li>
				<li><a href="{% url 'contact' %}">Contact</a></li>
			</ul>
		</div>
    </header>
    {% endfor %}
	<!-- Header section end -->
	
	<!-- Hero section -->
    {% block header %}
    
    {% endblock header %}
	<!-- Hero section end -->    

    {% block content %}
        
    {% endblock content %}
        
    <!-- Footer section -->
    <footer class="footer-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-2 col-sm-12">
                    <div class="footer-widget">
                        
                        {% for identite in identites %}
                            <img src="/media/{{identite.footer_logo}}" alt=""><br><hr color="white">
                            <p style="color:rgb(209, 209, 209)">{{identite.description}}</p>
                        {% endfor %}
                            
                        
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-4">
                    <div class="footer-widget">
                        <h5>COMPANY</h5>
                        <ul>
                            
                            {% for page in pages %}
                                <li><a href="{{page.lien}}">{{page.titre}}</a></li>
                            {% endfor %}
                                
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-4">
                    <div class="footer-widget">
                        <h5>LEGAL</h5>
                        <ul>
                            {% for otherpage in otherpages %}
                                <li><a href="{{otherpage.lien}}">{{otherpage.titre}}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-4">
                    <div class="footer-widget">
                        <h5>SOCIAL</h5>
                        <div class="footer-social">
                            
                            {% for sociallink in sociallinks  %}    
                            <a href="{{sociallink.lien}}"><i class="fa {{sociallink.icone_classe}}"></i></a>                           
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="copyright">
    Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
    </div> -->
    </footer>
    </div>
    <!-- Footer section end-->

    <!--====== Javascripts & Jquery ======-->
    <script src="/static/js/jquery-3.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/owl.carousel.min.js"></script>
    <script src="/static/js/jquery.magnific-popup.min.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/infinity/0.2.2/infinity.min.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                nom_complet:'',
                nom:'',
                prenoms:'',
                commentaire:'',
                sujet:'',
                email:'',
                phone:'',
                message:'',
                returntrue: false,
                returnfalse: false,
                result: '',
                new_id: '',
            },
            delimiters:[ "${", "}"],
            mounted(){
            },
            methods: {
                submitForm: function() {
                    let formData = new FormData();
                    formData.append('nom_complet', this.nom_complet);
                    formData.append('email', this.email);
                    formData.append('sujet', this.sujet);
                    formData.append('phone', this.phone);
                    formData.append('message', this.message);
                    
                    axios.defaults.xsrfCookieName = 'csrftoken'
                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                    axios.post('http://127.0.0.1:8000/contact/postform',
                        formData, 
                        {
                            headers: {
                                
                                'Content-Type': 'multipart/form-data',
                            }
                    }).then((response) => {
                        console.log(response.data);
                        console.log(response.data.succes); 
                        this.result = response.data;
                        console.log(this.result.succes);
                        if (this.result.succes){
                            this.returntrue=true
                            this.returnfalse=false
                            this.nom_complet=''
                            this.email=''
                            this.sujet=''
                            this.phone=''
                            this.message=''
                        }else{
                            this.returnfalse=true
                            this.returntrue=false
                        }
                      
                    })
                    .catch((err) => {
                        console.log(err);
                        this.returnfalse=false;
                        this.returntrue = false;
                    })
                },

                souscrire: function() {
                    let formData = new FormData();
                    formData.append('email', this.email);
                    axios.defaults.xsrfCookieName = 'csrftoken'
                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                    axios.post('http://127.0.0.1:8000/contact/souscrire',
                        formData, 
                        {
                            headers: {
                                
                                'Content-Type': 'multipart/form-data',
                            }
                    }).then((response) => {
                        console.log(response.data);
                        console.log(response.data.succes); 
                        this.result = response.data;
                        console.log(this.result.succes);
                        if (this.result.succes){
                            this.returntrue=true
                            this.returnfalse=false
                            this.email= ''
                        }else{
                            this.returnfalse=true
                            this.returntrue=false
                        }
                      
                    })
                    .catch((err) => {
                        console.log(err);
                        this.returnfalse=false;
                        this.returntrue = false;
                    })
                },
                comment: function() {
                    let formData = new FormData();
                    formData.append('nom', this.nom);
                    formData.append('email', this.email);
                    formData.append('prenoms', this.prenoms);
                    formData.append('commentaire', this.commentaire);
                    
                    axios.defaults.xsrfCookieName = 'csrftoken'
                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                    axios.post('http://127.0.0.1:8000/blog/comment/{{ new.id }}',
                        formData, this.id, 
                        {
                            headers: {
                                
                                'Content-Type': 'multipart/form-data',
                            }
                    }).then((response) => {
                        console.log(response.data);
                        console.log(response.data.succes); 
                        this.result = response.data;
                        console.log(this.result.succes);
                        if (this.result.succes){
                            this.returntrue=true
                            this.returnfalse=false

                        }else{
                            this.returnfalse=true
                            this.returntrue=false
                        }
                      
                    })
                    .catch((err) => {
                        console.log(err);
                        this.returnfalse=false;
                        this.returntrue = false;
                    })
                },
            }
        });
    </script>
</body>
</html>
